{% extends 'base.html' %}

{% block head_title%} 
!!!AMAZING!!!
{% endblock head_title%}

{% block content %}
 Welcome to My tweets

 <div id="tweets">
    Loading...
 </div>

<script>

    const tweetsElement = document.getElementById("tweets") 
    // tweetsElement.innerHTML = 'Loading...'
    // var el1 = "<h1>Hi there 1</h1>"
    // var el2 = "<h1>Hi there 2</h1>"
    // var el3 = "<h1>Hi there 3</h1>"
    // tweetsElement.innerHTML = el1 + el2 + el3

     const xhr = new XMLHttpRequest() // const xhr= new someclass()
     const method = 'GET' // "POST"
     const url = "/tweets"
     const responseType = "json"

     xhr.responseType = responseType
     xhr.open(method,url)
     xhr.onload = function (){
         const serverResponse = xhr.response
         const listedItems = serverResponse.response
         var finalTweetStr = ""
         var i;
         for (i=0;i<listedItems.length; i++) {
            console.log(i)
            console.log(listedItems[i])
            var currentItem = "<div class='mb-4'><h1>" + listedItems[i].id + "</h1>" + "<p>" + listedItems[i].content + "</p></div>"
                finalTweetStr += currentItem
         }
         tweetsElement.innerHTML = finalTweetStr
        //  console.log(listedItems)
     }
     xhr.send()

 </script>

{% endblock content%}